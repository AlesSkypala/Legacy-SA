
<!-- The Modal & Dygraph code -->
<div id="myModal" class="modal">
<!-- Modal content -->
  <div class="modal-content">
    <span class="close">&times;</span>
    <div id="graphdiv"></div>
    <br>
  </div>
</div>

<script>
// Get the modal
var modal = document.getElementById('myModal');

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks, open the modal 
function DynChart(csvfile, stitle, sylabel) {
    data = '%ImagePath%' + csvfile + '.csv';	
    modal.style.display = "block";
    graph = new Dygraph(
    document.getElementById("graphdiv"),
     data,
     {  title: stitle,
        ylabel: sylabel,
        xAxisHeight: 14,        
        showRangeSelector: true,
 	highlightCircleSize: 2,
        strokeWidth: 1,
        strokeBorderWidth: 0,
        rangeSelectorHeight: 60,
	highlightSeriesOpts: {
          strokeWidth: 1,
          strokeBorderWidth: 1,
          highlightCircleSize: 5,
        }, 
      });
}

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
    modal.style.display = "none"
    graph.destroy();
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target == modal) {
        modal.style.display = "none";
	graph.destroy();
    }
}
</script>
